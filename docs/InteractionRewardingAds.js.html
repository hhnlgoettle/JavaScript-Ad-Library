<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: InteractionRewardingAds.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: InteractionRewardingAds.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * @module
 * @class InteractionRewardingAds
 * @type {InteractionRewardingAds}
 * @description Manager that holds references to all other classes
 */

/* eslint-disable class-methods-use-this */
const LiveReward = require('./livereward/LiveReward');

const Timer = require('./timer/Timer');
const StatsManager = require('./stats/StatsManager');
const InteractionRecorder = require('./interaction/InteractionRecorder');
const InteractionRecorderOverlay = require('./ui/InteractionRecorderOverlay');
const CloseWarningModal = require('./ui/CloseWarningModal');
const CountdownContainer = require('./ui/CountdownContainer');

const InteractionRewardingAds = class InteractionRewardingAds {
  /**
   * @constructor
   */
  constructor() {
    this.timer = new Timer();
    this.stats = new StatsManager(this);
    this.recorder = new InteractionRecorder(this.timer);
    this.liveReward = new LiveReward(this);
    this.ui = {
      clickOverlay: new InteractionRecorderOverlay(this.recorder),
      countdownContainer: new CountdownContainer(this),
      modal: new CloseWarningModal(this),
    };
    this.api = null;
  }

  /**
   * @description initialize objects
   * @param {Number} desiredDurationMillis - how much time is desired to pass. In Milliseconds
   * @param {Number} desiredInteractionCount - how many interactions are desired
   * @param {Boolean} autoStart - start immediately
   */
  init({ desiredDurationMillis, desiredInteractionCount, autoStart = true } = {}) {
    this.stats.initStatsObj({ desiredDuration: desiredDurationMillis, desiredInteractionCount });
    this.getAndroidApi();
    if (autoStart !== false) {
      this.start();
    }
  }

  /**
   * @description inits the LiveReward Object
   * @param {Number} rewardAmount - the maximum amount the user will be
   * rewarded through interactions
   * @param {String} rewardType - the reward type the user will receive
   */
  initLiveReward({ rewardAmount, rewardType }) {
    if (this.liveReward) {
      this.liveReward.init({ rewardAmount, rewardType });
    }
  }

  /**
   * @description &lt;p>starts countdown and injects ui elements&lt;/p>
   * &lt;p>calls the api's onStart method for onStart-hooks&lt;/p>
   */
  start() {
    const countdown = Math.round(this.stats.stats.desiredDuration / 1000);
    this.timer.start(countdown);
    this.ui.clickOverlay.inject();
    this.ui.countdownContainer.inject();
    this.ui.modal.inject();
    try {
      this.api.onStart();
    } catch (err) {
      console.error({ err });
    }
  }

  getAndroidApi() {
    try {
      // eslint-disable-next-line no-undef
      this.api = AndroidIRA;
      console.log('detected API: ', this.api);
    } catch (err) {
      console.error('android api not available');
    }
  }

  close() {
    this.stats.getStats();
    this.api.onClose(JSON.stringify(this.stats.getStats()));
  }

  closeOnError(error) {
    this.api.onCloseOnError(error.message, this.stats.getStats());
  }

  /**
   * mark an event as valid
   * @param {MouseEvent} event
   */
  isValidEvent(event) {
    // eslint-disable-next-line no-param-reassign
    event.isValid = true;
  }
};

module.exports = InteractionRewardingAds;
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="CloseButton.html">CloseButton</a></li><li><a href="CloseWarningModal.html">CloseWarningModal</a></li><li><a href="Countdown.html">Countdown</a></li><li><a href="CountdownContainer.html">CountdownContainer</a></li><li><a href="InteractionRecorder.html">InteractionRecorder</a></li><li><a href="InteractionRecorderOverlay.html">InteractionRecorderOverlay</a></li><li><a href="InteractionRewardingAds.html">InteractionRewardingAds</a></li><li><a href="LiveReward.html">LiveReward</a></li><li><a href="Stats.html">Stats</a></li><li><a href="StatsManager.html">StatsManager</a></li><li><a href="Timer.html">Timer</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.7</a> on Sat Aug 28 2021 13:25:48 GMT+0200 (Mitteleurop√§ische Sommerzeit)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
